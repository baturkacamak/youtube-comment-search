var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},o=e.parcelRequireb06e;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in a){var o=a[e];delete a[e];var c={id:e,exports:{}};return t[e]=c,o.call(c.exports,c,c.exports),c.exports}var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){a[e]=t},e.parcelRequireb06e=o);const c={autoload:!0,highlightText:!0,cache:!0,autoClear:200};var n=o("epVyJ"),s=o("bRhBe");window.onload=async()=>{try{const e=e=>{"boolean"==typeof e&&(document.getElementById("y_opts_autoload").checked=e)},t=async e=>{try{await chrome.storage.local.set({autoload:e.checked})}catch(e){}},a=e=>{"boolean"==typeof e&&(document.getElementById("y_opts_highlight").checked=e)},o=async e=>{try{await chrome.storage.local.set({highlightText:e.checked})}catch(e){}},r=e=>{"boolean"==typeof e&&(document.getElementById("y_opts_cache").checked=e)},l=async e=>{try{await chrome.storage.local.set({cache:e.checked})}catch(e){}},i=e=>{e&&(document.getElementById("y_opts_cache_quota").value=e.toString())},d=async e=>{try{n.isNumeric(e.target.value)&&await chrome.storage.local.set({autoClear:e.target.value})}catch(e){}},h=async()=>{try{var e;const t=await s.idb,a=await navigator.storage.estimate(),o=document.getElementById("ycs_total_cache"),c=document.getElementById("ycs_used_cache"),r=document.getElementById("ycs_browser_av_storage"),l=document.getElementById("ycs_quota_av_storage");o.textContent=await t.count("STORE_CACHE_YCS")+"",c.textContent=n.formatBytes((null==a||null===(e=a.usageDetails)||void 0===e?void 0:e.indexedDB)||a.usage),r.textContent=(a.usage/a.quota*100).toFixed(2)+"%",l.textContent=n.formatBytes(a.quota)}catch(e){}},g=async()=>{try{const e=await s.idb;await e.clear("STORE_CACHE_YCS"),await h()}catch(e){}},y=await chrome.storage.local.get();await chrome.storage.local.set({...c,...y});const u=await chrome.storage.local.get();if(u)for(const t of Object.keys(u))switch(t){case"autoload":e(u[t]);break;case"highlightText":a(u[t]);break;case"cache":r(u[t]);break;case"autoClear":i(u[t])}const _=document.getElementsByClassName("ycs_inner_wrap")[0];null==_||_.addEventListener("click",(async e=>{switch(e.target.id){case"y_opts_autoload":t(e.target);break;case"y_opts_highlight":o(e.target);break;case"y_opts_cache":l(e.target);break;case"ycs_opts_btn_cache":e.target.disabled=!0,await g(),e.target.disabled=!1}}));const m=document.getElementById("y_opts_cache_quota");null==m||m.addEventListener("input",d);document.getElementById("ycs_opts_btn_export_page").onclick=()=>{try{chrome.tabs.create({url:chrome.runtime.getURL("./options/export.html")})}catch(e){}},await h()}catch(e){}};